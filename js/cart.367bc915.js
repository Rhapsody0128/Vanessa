(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cart"],{"159b":function(t,e,s){var a=s("da84"),n=s("fdbc"),r=s("17c2"),c=s("9112");for(var i in n){var o=a[i],l=o&&o.prototype;if(l&&l.forEach!==r)try{c(l,"forEach",r)}catch(u){l.forEach=r}}},"17c2":function(t,e,s){"use strict";var a=s("b727").forEach,n=s("a640"),r=s("ae40"),c=n("forEach"),i=r("forEach");t.exports=c&&i?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,e,s){"use strict";var a=s("23e7"),n=s("17c2");a({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"82fa":function(t,e,s){},9608:function(t,e,s){"use strict";var a=s("82fa"),n=s.n(a);n.a},a640:function(t,e,s){"use strict";var a=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&a((function(){s.call(null,e||function(){throw 1},1)}))}},ae40:function(t,e,s){var a=s("83ab"),n=s("d039"),r=s("5135"),c=Object.defineProperty,i={},o=function(t){throw t};t.exports=function(t,e){if(r(i,t))return i[t];e||(e={});var s=[][t],l=!!r(e,"ACCESSORS")&&e.ACCESSORS,u=r(e,0)?e[0]:o,d=r(e,1)?e[1]:void 0;return i[t]=!!s&&!n((function(){if(l&&!a)return!0;var t={length:-1};l?c(t,1,{enumerable:!0,get:o}):t[1]=1,s.call(t,u,d)}))}},b727:function(t,e,s){var a=s("0366"),n=s("44ad"),r=s("7b0b"),c=s("50c4"),i=s("65f0"),o=[].push,l=function(t){var e=1==t,s=2==t,l=3==t,u=4==t,d=6==t,v=5==t||d;return function(f,h,p,m){for(var g,b,y=r(f),C=n(y),_=a(h,p,3),x=c(C.length),k=0,S=m||i,L=e?S(f,x):s?S(f,0):void 0;x>k;k++)if((v||k in C)&&(g=C[k],b=_(g,k,y),t))if(e)L[k]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return k;case 2:o.call(L,g)}else if(u)return!1;return d?-1:l||u?u:L}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},d81d:function(t,e,s){"use strict";var a=s("23e7"),n=s("b727").map,r=s("1dde"),c=s("ae40"),i=r("map"),o=c("map");a({target:"Array",proto:!0,forced:!i||!o},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},da83:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"cart"}},[s("h1",{staticClass:"text-center mt-4 mb-4"},[t._v("購物車")]),s("div",{staticClass:"container all",style:t.allstyle},[s("div",{staticClass:"cart",style:t.cartstyle},[s("h1",{staticClass:"text-center mt-4 mb-4"},[t._v("未送出訂單")]),s("vs-table",{attrs:{data:t.cart},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return s("vs-tr",{key:a},[e.buying?s("vs-td",{attrs:{data:e.title}},[s("span",{staticClass:"text"},[t._v(t._s(e.title))])]):t._e(),e.buying?s("vs-td",{attrs:{data:e.value}},[s("span",{staticClass:"text"},[t._v(t._s(e.value))])]):t._e(),e.buying?s("vs-td",{attrs:{data:e}},[s("span",{staticClass:"text"},[t._v(t._s(e.value*e.number))])]):t._e(),e.buying?s("vs-td",{attrs:{data:e.number}},[s("span",{staticClass:"text"},[t._v(t._s(e.number))]),s("template",{slot:"edit"},[s("vs-input",{staticClass:"inputx",attrs:{type:"number",placeholder:"數量"},model:{value:e.number,callback:function(s){t.$set(e,"number",s)},expression:"tr.number"}})],1)],2):t._e(),e.buying?s("vs-td",{attrs:{data:e.src}},[s("div",[s("div",{staticClass:"image"},[s("img",{attrs:{src:e.src}})])])]):t._e(),e.buying?s("vs-td",{attrs:{data:e}},[s("vs-button",{staticClass:"d-block",attrs:{color:"success",type:"filled"},on:{click:function(s){return t.openConfirm(e)}}},[s("span",{staticClass:"btntext"},[t._v("儲存")])]),s("vs-button",{staticClass:"d-block",attrs:{color:"danger",type:"filled"},on:{click:function(s){return t.openDeleteConfirm(e)}}},[s("span",{staticClass:"btntext"},[t._v("刪除")])])],1):t._e()],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",{attrs:{"sort-key":"title"}},[s("span",{staticClass:"item"},[t._v("項目")])]),s("vs-th",{attrs:{"sort-key":"value"}},[s("span",{staticClass:"item"},[t._v("單價")])]),s("vs-th",{attrs:{"sort-key":"value"}},[s("span",{staticClass:"item"},[t._v("價格")])]),s("vs-th",{attrs:{"sort-key":"number"}},[s("span",{staticClass:"item"},[t._v("數量")])]),s("vs-th",[s("span",{staticClass:"item ml-lg-5 ml-4"},[t._v("圖片")])]),s("vs-th",[s("span",{staticClass:"item"},[t._v("動作")])])],1)],2),s("div",{staticClass:"row justify-content-end mt-3 mb-3"},[s("h4",{staticClass:"text-right mr-5"},[t._v("總品項數量:"+t._s(t.allnumber))]),s("h4",{staticClass:"text-right"},[t._v("總品項價格:"+t._s(t.allvalue))])]),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-6 col-lg-2 d-flex justify-content-center"},[s("vs-button",{attrs:{color:"success",type:"filled"},on:{click:t.buy}},[s("span",{staticClass:"btntext"},[t._v("購買")])])],1),s("div",{staticClass:"col-6 col-lg-2 d-flex justify-content-center"},[s("vs-button",{attrs:{color:"danger",type:"filled"},on:{click:t.clear}},[s("span",{staticClass:"btntext"},[t._v("清空")])])],1)]),s("button",{staticClass:"btn btn-light toggle mt-5",on:{click:t.changetoggle}},[t._v("確認歷史訂單")])],1),s("div",{staticClass:"ordering",style:t.orderingstyle},[s("h1",{staticClass:"text-center mt-4 mb-4"},[t._v("歷史訂單")]),s("vs-table",{attrs:{data:t.cart},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,(function(e,a){return s("vs-tr",{key:a},[1!=e.buying?s("vs-td",{attrs:{data:e.title}},[s("span",{staticClass:"text"},[t._v(t._s(e.title))])]):t._e(),1!=e.buying?s("vs-td",{attrs:{data:e.value}},[s("span",{staticClass:"text"},[t._v(t._s(e.value))])]):t._e(),1!=e.buying?s("vs-td",{attrs:{data:e}},[s("span",{staticClass:"text"},[t._v(t._s(e.value*e.number))])]):t._e(),1!=e.buying?s("vs-td",{attrs:{data:e.number}},[s("span",{staticClass:"text"},[t._v(t._s(e.number))])]):t._e(),1!=e.buying?s("vs-td",{attrs:{data:e.src}},[s("div",[s("div",{staticClass:"image"},[s("img",{attrs:{src:e.src}})])])]):t._e()],1)}))}}])},[s("template",{slot:"thead"},[s("vs-th",{attrs:{"sort-key":"title"}},[s("span",{staticClass:"item"},[t._v("項目")])]),s("vs-th",{attrs:{"sort-key":"value"}},[s("span",{staticClass:"item"},[t._v("單價")])]),s("vs-th",{attrs:{"sort-key":"value"}},[s("span",{staticClass:"item"},[t._v("價格")])]),s("vs-th",{attrs:{"sort-key":"number"}},[s("span",{staticClass:"item"},[t._v("數量")])]),s("vs-th",[s("span",{staticClass:"item ml-lg-5 ml-4"},[t._v("圖片")])])],1)],2),s("button",{staticClass:"btn btn-light toggle mt-5",on:{click:t.changetoggle}},[t._v("購物車")])],1)])])},n=[],r=(s("4160"),s("d81d"),s("159b"),{data:function(){return{title:"",value:"",number:null,src:null,cart:[],changecart:"",allstyle:{},cartstyle:{},orderingstyle:{},toggle:!1,block:!0,cartorder:{account:"",itemid:[],title:[],number:[],value:[],src:[],buying:"",finish:""}}},computed:{account:function(){return this.$store.getters.account},allnumber:function(){var t=0;return this.cart.forEach((function(e){e.buying&&(t+=parseInt(e.number))})),t},allvalue:function(){var t=0;return this.cart.forEach((function(e){e.buying&&(t+=parseInt(e.number)*parseInt(e.value))})),t}},methods:{openConfirm:function(t){this.changecart=t,this.$vs.dialog({type:"confirm",color:"success",title:"確認更變",text:"確認更變項目嗎",accept:this.acceptAlert})},acceptAlert:function(t){var e=this;this.$vs.notify({color:"primary",title:"已順利更變",text:"已順利所選項目"}),this.axios.post("http://localhost:3000/changecart",{number:this.changecart.number,id:this.changecart.id}).then((function(t){e.$swal("完成","已成功更變菜單","success")})).catch((function(t){e.$swal("錯誤","".concat(t.response.data.message),"error")}))},openDeleteConfirm:function(t){this.changecart=t,this.$vs.dialog({type:"confirm",color:"danger",title:"確認刪除",text:"確認刪除項目嗎",accept:this.acceptDeleteAlert})},acceptDeleteAlert:function(t){var e=this;this.$vs.notify({color:"primary",title:"已順利刪除",text:"已順利刪除所選項目"}),this.axios.post("http://localhost:3000/deletecart",{id:this.changecart.id}).then((function(t){e.$swal("完成","已成功刪除商品","success")})).catch((function(t){e.$swal("錯誤","".concat(t.response.data.message),"error")}))},buy:function(){var t=this;this.$swal({title:"購買確認",text:"總共".concat(this.allvalue,"元，是否確定送出?"),icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(e){e.value&&(t.cart.forEach((function(e){e.number<1&&(t.block=!1,t.$swal("錯誤","商品數量不能為負數或零","error"))})),t.block&&(t.block=!0,t.cart.forEach((function(e){e.buying&&t.axios.post("http://localhost:3000/buyingcart",{id:e.id,buying:!1}).catch((function(t){console.log(t.response.data.message)}))})),t.cartorder.account=t.account,t.cartorder.buying=!1,t.cartorder.finish=!1,t.cart.forEach((function(e){e.buying&&(t.cartorder.itemid.push(e.itemid),t.cartorder.title.push(e.title),t.cartorder.number.push(parseInt(e.number)),t.cartorder.value.push(e.value),t.cartorder.src.push(e.src))})),t.axios.post("http://localhost:3000/cartorder",t.cartorder).then((function(e){t.$swal("確認","已收到您的訂單您的訂單編號為".concat(e.data.result.id),"success"),t.cartorder={account:"",itemid:[],title:[],number:[],value:[],src:[],buying:"",finish:""}})).catch((function(t){console.log(t.response.data.message)}))))}))},clear:function(){},changetoggle:function(){this.toggle=!this.toggle,this.toggle?(this.allstyle={transform:"rotateY(180deg)"},this.cartstyle={pointerEvents:"none",opacity:"0"},this.orderingstyle={pointerEvents:"auto",opacity:"1"}):(this.allstyle={transform:"rotateY(0deg)"},this.cartstyle={pointerEvents:"auto",opacity:"1"},this.orderingstyle={pointerEvents:"none",opacity:"0"})}},mounted:function(){var t=this;this.axios.post("http://localhost:3000/getusercart",{account:this.account}).then((function(e){t.cart=e.data.result.map((function(t){return{itemid:t.id,account:t.account,title:t.title,number:t.number,value:t.value,src:t.src,buying:t.buying,id:t.id}}))})).catch((function(t){console.log(t.response.data.message)}))}}),c=r,i=(s("9608"),s("2877")),o=Object(i["a"])(c,a,n,!1,null,null,null);e["default"]=o.exports},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=cart.367bc915.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cart"],{"159b":function(t,s,a){var e=a("da84"),n=a("fdbc"),r=a("17c2"),i=a("9112");for(var c in n){var o=e[c],l=o&&o.prototype;if(l&&l.forEach!==r)try{i(l,"forEach",r)}catch(u){l.forEach=r}}},"17c2":function(t,s,a){"use strict";var e=a("b727").forEach,n=a("a640"),r=a("ae40"),i=n("forEach"),c=r("forEach");t.exports=i&&c?[].forEach:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}},4160:function(t,s,a){"use strict";var e=a("23e7"),n=a("17c2");e({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"4de4":function(t,s,a){"use strict";var e=a("23e7"),n=a("b727").filter,r=a("1dde"),i=a("ae40"),c=r("filter"),o=i("filter");e({target:"Array",proto:!0,forced:!c||!o},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"82fa":function(t,s,a){},9608:function(t,s,a){"use strict";var e=a("82fa"),n=a.n(e);n.a},a640:function(t,s,a){"use strict";var e=a("d039");t.exports=function(t,s){var a=[][t];return!!a&&e((function(){a.call(null,s||function(){throw 1},1)}))}},ae40:function(t,s,a){var e=a("83ab"),n=a("d039"),r=a("5135"),i=Object.defineProperty,c={},o=function(t){throw t};t.exports=function(t,s){if(r(c,t))return c[t];s||(s={});var a=[][t],l=!!r(s,"ACCESSORS")&&s.ACCESSORS,u=r(s,0)?s[0]:o,d=r(s,1)?s[1]:void 0;return c[t]=!!a&&!n((function(){if(l&&!e)return!0;var t={length:-1};l?i(t,1,{enumerable:!0,get:o}):t[1]=1,a.call(t,u,d)}))}},b727:function(t,s,a){var e=a("0366"),n=a("44ad"),r=a("7b0b"),i=a("50c4"),c=a("65f0"),o=[].push,l=function(t){var s=1==t,a=2==t,l=3==t,u=4==t,d=6==t,v=5==t||d;return function(f,h,p,b){for(var m,y,g=r(f),C=n(g),_=e(h,p,3),x=i(C.length),k=0,w=b||c,E=s?w(f,x):a?w(f,0):void 0;x>k;k++)if((v||k in C)&&(m=C[k],y=_(m,k,g),t))if(s)E[k]=y;else if(y)switch(t){case 3:return!0;case 5:return m;case 6:return k;case 2:o.call(E,m)}else if(u)return!1;return d?-1:l||u?u:E}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},d81d:function(t,s,a){"use strict";var e=a("23e7"),n=a("b727").map,r=a("1dde"),i=a("ae40"),c=r("map"),o=i("map");e({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},da83:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"cart"}},[a("h1",{staticClass:"text-center mt-4 mb-4 bigtitle"},[t._v("購物車")]),a("div",{staticClass:"container all",style:t.allstyle},[a("div",{staticClass:"cart",style:t.cartstyle},[a("h2",{staticClass:"text-center mt-4 mb-4 title-lg"},[t._v("未送出訂單")]),a("vs-table",{attrs:{data:t.cart},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.data;return t._l(e,(function(s,e){return a("vs-tr",{key:e},[s.buying?a("vs-td",{attrs:{data:s.title}},[a("span",{staticClass:"text"},[t._v(t._s(s.title))])]):t._e(),s.buying?a("vs-td",{attrs:{data:s.value}},[a("span",{staticClass:"text"},[t._v(t._s(s.value))])]):t._e(),s.buying?a("vs-td",{attrs:{data:s}},[a("span",{staticClass:"text"},[t._v(t._s(s.value*s.number))])]):t._e(),s.buying?a("vs-td",{attrs:{data:s.number}},[a("span",{staticClass:"text"},[t._v(t._s(s.number))]),a("template",{slot:"edit"},[a("vs-input",{staticClass:"inputx",attrs:{type:"number",placeholder:"數量"},model:{value:s.number,callback:function(a){t.$set(s,"number",a)},expression:"tr.number"}})],1)],2):t._e(),s.buying?a("vs-td",{attrs:{data:s.src}},[a("div",[a("div",{staticClass:"image"},[a("img",{attrs:{src:s.src}})])])]):t._e(),s.buying?a("vs-td",{attrs:{data:s}},[a("vs-button",{staticClass:"d-block",attrs:{color:"success",type:"filled"},on:{click:function(a){return t.openConfirm(s)}}},[a("span",{staticClass:"btntext"},[t._v("儲存")])]),a("vs-button",{staticClass:"d-block",attrs:{color:"danger",type:"filled"},on:{click:function(a){return t.openDeleteConfirm(s)}}},[a("span",{staticClass:"btntext"},[t._v("刪除")])])],1):t._e()],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"title"}},[a("span",{staticClass:"item"},[t._v("項目")])]),a("vs-th",{attrs:{"sort-key":"value"}},[a("span",{staticClass:"item"},[t._v("單價")])]),a("vs-th",{attrs:{"sort-key":"value"}},[a("span",{staticClass:"item"},[t._v("價格")])]),a("vs-th",{attrs:{"sort-key":"number"}},[a("span",{staticClass:"item"},[t._v("數量")])]),a("vs-th",[a("span",{staticClass:"item"},[t._v("圖片")])]),a("vs-th",[a("span",{staticClass:"item"},[t._v("動作")])])],1)],2),a("div",{staticClass:"row justify-content-end mt-3 mb-3"},[a("h4",{staticClass:"text-right mr-5"},[t._v("總品項數量:"+t._s(t.allnumber))]),a("h4",{staticClass:"text-right"},[t._v("總品項價格:"+t._s(t.allvalue))])]),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-6 col-lg-2 d-flex justify-content-center"},[a("vs-button",{attrs:{color:"success",type:"filled"},on:{click:t.buy}},[a("span",{staticClass:"btntext"},[t._v("購買")])])],1),a("div",{staticClass:"col-6 col-lg-2 d-flex justify-content-center"},[a("vs-button",{attrs:{color:"danger",type:"filled"},on:{click:t.clear}},[a("span",{staticClass:"btntext"},[t._v("清空")])])],1)]),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-2 col-6 d-flex justify-content-center"},[a("button",{staticClass:" btn btn-light mt-5 mb-5",on:{click:function(s){return t.changetoggle(3)}}},[t._v("訂單查詢")])]),a("div",{staticClass:"col-lg-2 col-6 d-flex justify-content-center"},[a("button",{staticClass:" btn btn-light mt-5 mb-5",on:{click:function(s){return t.changetoggle(2)}}},[t._v("訂購紀錄")])])])],1),a("div",{staticClass:"ordering",style:t.orderingstyle},[a("h2",{staticClass:"text-center mt-4 mb-4 title-lg"},[t._v("訂購紀錄")]),a("vs-table",{attrs:{data:t.cart},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.data;return t._l(e,(function(s,e){return a("vs-tr",{key:e},[1!=s.buying?a("vs-td",{attrs:{data:s.title}},[a("span",{staticClass:"text"},[t._v(t._s(s.title))])]):t._e(),1!=s.buying?a("vs-td",{attrs:{data:s.value}},[a("span",{staticClass:"text"},[t._v(t._s(s.value))])]):t._e(),1!=s.buying?a("vs-td",{attrs:{data:s}},[a("span",{staticClass:"text"},[t._v(t._s(s.value*s.number))])]):t._e(),1!=s.buying?a("vs-td",{attrs:{data:s.number}},[a("span",{staticClass:"text"},[t._v(t._s(s.number))])]):t._e(),1!=s.buying?a("vs-td",{attrs:{data:s.src}},[a("div",[a("div",{staticClass:"image"},[a("img",{attrs:{src:s.src}})])])]):t._e(),1!=s.buying?a("vs-td",{attrs:{data:s}},[a("div",{staticClass:"p-5"},[a("vs-button",{staticClass:"d-block",attrs:{color:"danger",type:"filled"},on:{click:function(a){return t.openDeleteConfirm(s)}}},[a("span",{staticClass:"btntext"},[t._v("清除")])])],1)]):t._e()],1)}))}}])},[a("template",{slot:"thead"},[a("vs-th",{attrs:{"sort-key":"title"}},[a("span",{staticClass:"item"},[t._v("項目")])]),a("vs-th",{attrs:{"sort-key":"value"}},[a("span",{staticClass:"item"},[t._v("單價")])]),a("vs-th",{attrs:{"sort-key":"value"}},[a("span",{staticClass:"item"},[t._v("價格")])]),a("vs-th",{attrs:{"sort-key":"number"}},[a("span",{staticClass:"item"},[t._v("數量")])]),a("vs-th",[a("span",{staticClass:"item"},[t._v("圖片")])]),a("vs-th",[a("span",{staticClass:"item"},[t._v("清除")])])],1)],2),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-2 col-6 d-flex justify-content-center"},[a("button",{staticClass:" btn btn-light mt-5 mb-5",on:{click:function(s){return t.changetoggle(1)}}},[t._v("購物車")])]),a("div",{staticClass:"col-lg-2 col-6 d-flex justify-content-center"},[a("button",{staticClass:" btn btn-light mt-5 mb-5",on:{click:function(s){return t.changetoggle(3)}}},[t._v("訂單查詢")])])])],1),a("div",{staticClass:"history",style:t.historystyle},[a("h2",{staticClass:"text-center mt-4 mb-4"},[t._v("訂單查詢")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("vs-table",{staticClass:"table",attrs:{data:t.history},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.data;return t._l(e,(function(s,n){return a("vs-tr",{key:n,attrs:{data:s}},[e[n].finish?t._e():a("vs-td",{staticClass:"border",attrs:{data:e[n].account}},[a("span",{staticClass:"text"},[t._v(t._s(e[n].account))])]),e[n].finish?t._e():a("vs-td",{staticClass:"border tableform",attrs:{data:e[n].title}},t._l(e[n].title,(function(s,e){return a("div",{key:e,staticClass:"text"},[t._v(t._s(s)),a("br")])})),0),e[n].finish?t._e():a("vs-td",{staticClass:"border tableform",attrs:{data:e[n].number}},t._l(e[n].number,(function(s,e){return a("div",{key:e,staticClass:"text"},[t._v(t._s(s)),a("br")])})),0),e[n].finish?t._e():a("vs-td",{staticClass:"border tableform",attrs:{data:e[n].value}},t._l(e[n].value,(function(s,e){return a("div",{key:e,staticClass:"text"},[t._v(t._s(s)),a("br")])})),0),e[n].finish?t._e():a("vs-td",{attrs:{data:e[n].id}},[a("span",{staticClass:"text"},[t._v(t._s(e[n].id))])])],1)}))}}])},[a("template",{slot:"header"},[a("h1",{staticClass:"title text-center"},[t._v("處理中訂單")])]),a("template",{slot:"thead"},[a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"account"}},[t._v("帳號")]),a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"title"}},[t._v("項目")]),a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"number"}},[t._v("數量")]),a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"value"}},[t._v("單價")]),a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"id"}},[t._v("訂單編號")])],1)],2)],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("vs-table",{staticClass:"table",attrs:{data:t.history},scopedSlots:t._u([{key:"default",fn:function(s){var e=s.data;return t._l(e,(function(s,n){return a("vs-tr",{key:n,attrs:{data:s}},[e[n].finish?a("vs-td",{staticClass:"border",attrs:{data:e[n].account}},[a("span",{staticClass:"text"},[t._v(t._s(e[n].account))])]):t._e(),e[n].finish?a("vs-td",{staticClass:"border tableform",attrs:{data:e[n].title}},t._l(e[n].title,(function(s,e){return a("div",{key:e,staticClass:"text"},[t._v(t._s(s)),a("br")])})),0):t._e(),e[n].finish?a("vs-td",{staticClass:"border tableform",attrs:{data:e[n].number}},t._l(e[n].number,(function(s,e){return a("div",{key:e,staticClass:"text"},[t._v(t._s(s)),a("br")])})),0):t._e(),e[n].finish?a("vs-td",{staticClass:"border tableform",attrs:{data:e[n].value}},t._l(e[n].value,(function(s,e){return a("div",{key:e,staticClass:"text"},[t._v(t._s(s)),a("br")])})),0):t._e(),e[n].finish?a("vs-td",{attrs:{data:e[n].id}},[a("span",{staticClass:"text"},[t._v(t._s(e[n].id))])]):t._e()],1)}))}}])},[a("template",{slot:"header"},[a("h1",{staticClass:"title text-center"},[t._v("已處理訂單")])]),a("template",{slot:"thead"},[a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"account"}},[t._v("帳號")]),a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"title"}},[t._v("項目")]),a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"number"}},[t._v("數量")]),a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"value"}},[t._v("單價")]),a("vs-th",{staticClass:"item p-lg-3",attrs:{"sort-key":"id"}},[t._v("訂單編號")])],1)],2)],1)]),a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-2 col-6 d-flex justify-content-center"},[a("button",{staticClass:" btn btn-light mt-5 mb-5",on:{click:function(s){return t.changetoggle(1)}}},[t._v("購物車")])]),a("div",{staticClass:"col-lg-2 col-6 d-flex justify-content-center"},[a("button",{staticClass:" btn btn-light mt-5 mb-5",on:{click:function(s){return t.changetoggle(2)}}},[t._v("訂購紀錄")])])])])])])},n=[],r=(a("4de4"),a("4160"),a("d81d"),a("159b"),{data:function(){return{title:"",value:"",number:null,src:null,cart:[],changecart:"",allstyle:{},cartstyle:{},orderingstyle:{},historystyle:{},block:!0,cartorder:{account:"",itemid:[],title:[],number:[],value:[],src:[],buying:"",finish:""},history:[]}},computed:{account:function(){return this.$store.getters.account},allnumber:function(){var t=0;return this.cart.forEach((function(s){s.buying&&(t+=parseInt(s.number))})),t},allvalue:function(){var t=0;return this.cart.forEach((function(s){s.buying&&(t+=parseInt(s.number)*parseInt(s.value))})),t}},methods:{openConfirm:function(t){this.changecart=t,this.$vs.dialog({type:"confirm",color:"success",title:"確認更變",text:"確認更變項目嗎",accept:this.acceptAlert})},acceptAlert:function(t){var s=this;this.$vs.notify({color:"primary",title:"已順利更變",text:"已順利所選項目"}),this.axios.post("https://vanessa-rhapsody.herokuapp.com/changecart",{number:this.changecart.number,id:this.changecart.id}).then((function(t){s.$swal("完成","已成功更變菜單","success")})).catch((function(t){s.$swal("錯誤","".concat(t.response.data.message),"error")}))},openDeleteConfirm:function(t){this.changecart=t,this.$vs.dialog({type:"confirm",color:"danger",title:"確認刪除",text:"確認刪除項目嗎",accept:this.acceptDeleteAlert})},acceptDeleteAlert:function(t){var s=this;this.$vs.notify({color:"primary",title:"已順利刪除",text:"已順利刪除所選項目"}),this.axios.post("https://vanessa-rhapsody.herokuapp.com/deletecart",{id:this.changecart.id}).then((function(t){s.$swal("完成","已成功刪除商品","success")})).catch((function(t){s.$swal("錯誤","".concat(t.response.data.message),"error")}))},buy:function(){var t=this;this.$swal({title:"購買確認",text:"總共".concat(this.allvalue,"元，是否確定送出?"),icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(s){if(s.value){t.cart.forEach((function(s){s.number<1&&(t.block=!1,t.$swal("錯誤","商品數量不能為負數或零","error"))}));var a=t.cart.filter((function(t){return!0===t.buying}));a.length>0?t.block&&(t.block=!0,t.cart.forEach((function(s){s.buying&&t.axios.post("https://vanessa-rhapsody.herokuapp.com/buyingcart",{id:s.id,buying:!1}).catch((function(s){t.$swal("錯誤","".concat(s.response.data.message),"error")}))})),t.cartorder.account=t.account,t.cartorder.buying=!1,t.cartorder.finish=!1,t.cart.forEach((function(s){s.buying&&(t.cartorder.itemid.push(s.itemid),t.cartorder.title.push(s.title),t.cartorder.number.push(parseInt(s.number)),t.cartorder.value.push(s.value),t.cartorder.src.push(s.src))})),t.axios.post("https://vanessa-rhapsody.herokuapp.com/cartorder",t.cartorder).then((function(s){t.$swal("確認","已收到您的訂單，您的訂單編號為".concat(s.data.result.id),"success"),t.cartorder={account:"",itemid:[],title:[],number:[],value:[],src:[],buying:"",finish:""}})).catch((function(s){t.$swal("錯誤","".concat(s.response.data.message),"error")}))):t.$swal("錯誤","購物車沒有商品","error")}}))},clear:function(){var t=this;this.$swal({title:"清空",text:"確定要清空購物車?",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(s){if(s.value){var a=t.cart.filter((function(t){return!0===t.buying}));a.length>0?t.cart.forEach((function(s){s.buying&&t.axios.post("https://vanessa-rhapsody.herokuapp.com/clearcart",{account:t.account,buying:s.buying}).then((function(s){t.$swal("完成","已清空購物車","success")})).catch((function(s){t.$swal("錯誤","".concat(s.response.data.message),"error")}))})):t.$swal("錯誤","購物車沒有商品","error")}}))},changetoggle:function(t){1===t?(this.allstyle={transform:"rotateY(0deg)"},this.cartstyle={pointerEvents:"auto",opacity:"1"},this.orderingstyle={pointerEvents:"none",opacity:"0"},this.historystyle={pointerEvents:"none",opacity:"0"}):2===t?(this.allstyle={transform:"rotateY(240deg)"},this.cartstyle={pointerEvents:"none",opacity:"0"},this.orderingstyle={pointerEvents:"auto",opacity:"1"},this.historystyle={pointerEvents:"none",opacity:"0"}):(this.allstyle={transform:"rotateY(-240deg)"},this.cartstyle={pointerEvents:"none",opacity:"0"},this.orderingstyle={pointerEvents:"none",opacity:"0"},this.historystyle={pointerEvents:"auto",opacity:"1"})}},mounted:function(){var t=this;this.$store.commit("boxshow"),this.axios.post("https://vanessa-rhapsody.herokuapp.com/getusercartorder",{account:this.account}).then((function(s){t.history=s.data.result})).catch((function(s){t.$swal("錯誤","".concat(s.response.data.message),"error")})),this.axios.post("https://vanessa-rhapsody.herokuapp.com/getusercart",{account:this.account}).then((function(s){t.cart=s.data.result.map((function(t){return{itemid:t.id,account:t.account,title:t.title,number:t.number,value:t.value,src:t.src,buying:t.buying,id:t.id}}))})).catch((function(s){t.$swal("錯誤","".concat(s.response.data.message),"error")}))}}),i=r,c=(a("9608"),a("2877")),o=Object(c["a"])(i,e,n,!1,null,null,null);s["default"]=o.exports},fdbc:function(t,s){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=cart.4bb4805c.js.map